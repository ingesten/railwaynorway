<!DOCTYPE html>
<html lang="en">
<head>

    <!-- 
        Version: 6
        This page will rotate between a Bane NOR fullscreen train status of your selected railway station 
        and a Yr.no meteogram SVG for weather forecast.
        Author: isten
        Date: 2024-11-05
    -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rotating Pages with News</title>

    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        iframe {
            width: 100%;
            height: 90%; /* Adjusted height for space for the RSS feed */
            border: none;
        }

        #rssFeed {
            background-color: #f0f0f0;
            padding: 10px;
            font-size: 18px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .news-ticker {
            display: flex;
            animation: scroll-left 15s linear infinite;
        }

        @keyframes scroll-left {
            0% {
                transform: translateX(100%);
            }
            100% {
                transform: translateX(-100%);
            }
        }
    </style>

    <script>
        // Constants
        const ROTATION_INTERVAL = 30000; // Time interval in milliseconds (30 seconds)
        const URLs = [
            "https://rtd.banenor.no",   // Train status page
            "https://www.yr.no"         // Weather page
        ];

        let currentIndex = 0;

        function rotatePages() {
            // Set the src of the iframe to the current URL
            document.getElementById('webframe').src = URLs[currentIndex];
            // Update index to the next URL
            currentIndex = (currentIndex + 1) % URLs.length;
            // Set timer to load the next URL after ROTATION_INTERVAL
            setTimeout(rotatePages, ROTATION_INTERVAL);
        }

        // Start rotation when the page loads
        window.onload = rotatePages;

        // Function to fetch RSS feed and update the ticker
        function fetchRSSFeed() {
            const rssUrl = 'https://www.nrk.no/nyheter/siste.rss';
            fetch(`https://api.rss2json.com/v1/api.json?rss_url=${rssUrl}`)
                .then(response => response.json())
                .then(data => {
                    const items = data.items;
                    const tickerContainer = document.getElementById('rssFeed');
                    let tickerHTML = '<div class="news-ticker">';

                    // Loop through the feed items and create the ticker
                    items.forEach(item => {
                        tickerHTML += `<span>${item.title} - </span>`;
                    });

                    tickerHTML += '</div>';
                    tickerContainer.innerHTML = tickerHTML;
                })
                .catch(error => {
                    console.error('Error fetching RSS feed:', error);
                });
        }

        // Fetch RSS feed on load
        window.onload = function() {
            rotatePages();
            fetchRSSFeed();  // Fetch RSS feed
        };
    </script>

</head>
<body>
    <!-- RSS Feed Display -->
    <div id="rssFeed"></div>

    <!-- Iframe for Rotating Pages -->
    <iframe id="webframe"></iframe>

    <!-- Visible copyright notice -->
    <footer style="text-align: center; margin-top: 10px;">
        <p>&copy; 2024 Your Name or Company</p>
    </footer>
</body>
</html>
